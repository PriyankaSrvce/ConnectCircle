<!DOCTYPE html>
<html>
<head>
    <title>Volunteer Dashboard</title>
</head>
<body>
<h2>Welcome Volunteer</h2>
<a href="/logout">Logout</a>

<hr>

<h3>Pending Requests</h3>

{% for r in pending %}
<div style="border:1px solid black; padding:10px; margin:10px;">
    <b>Seeker:</b> {{ r[1] }} <br>
    <b>Category:</b> {{ r[2] }} <br>
    <b>Description:</b> {{ r[3] }} <br>
    <b>Location:</b> {{ r[4] }} <br>

    {% if r[5] == 1 %}
        <span style="color:red;"><b>EMERGENCY</b></span><br>
        <small>Reason: {{ r[13] }}</small><br>
    {% endif %}

    <form method="POST">
        <input type="hidden" name="action" value="accept">
        <input type="hidden" name="id" value="{{ r[0] }}">

        Phone:
        <input type="text" name="phone" required><br>

        ETA:
        <input type="text" name="eta" required><br>

        <button type="submit">Accept Request</button>
    </form>
</div>
{% else %}
<p>No pending requests.</p>
{% endfor %}

<hr>

<h3>My Accepted / Completed Requests</h3>

{% for r in mine %}
<div style="border:1px solid green; padding:10px; margin:10px;">
    <b>Seeker:</b> {{ r[1] }} <br>
    <b>Status:</b> {{ r[6] }} <br>
    <b>Phone:</b> {{ r[8] }} <br>
    <b>ETA:</b> {{ r[9] }} <br>

    {% if r[6] == "Accepted" %}
    <form method="POST">
        <input type="hidden" name="action" value="complete">
        <input type="hidden" name="id" value="{{ r[0] }}">
        <button type="submit">Mark as Completed</button>
    </form>
    {% endif %}

    {% if r[6] == "Completed" and r[12] == 1 %}
        <p><b>Rating:</b> {{ r[10] }}/5</p>
        <p><b>Feedback:</b> {{ r[11] }}</p>
    {% endif %}
</div>
{% else %}
<p>No accepted requests yet.</p>
{% endfor %}

</body>
</html>
