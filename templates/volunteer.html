<!DOCTYPE html>
<html>
<head>
  <title>ConnectCircle | Volunteer</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 text-lg">

<nav class="bg-white shadow p-4 flex justify-between">
  <h1 class="font-bold text-2xl text-indigo-600">ConnectCircle</h1>

  <div class="flex items-center gap-3">
    <div class="w-10 h-10 bg-indigo-600 text-white rounded-full flex items-center justify-center font-bold">
      {{ user[0]|upper }}
    </div>
    <span class="font-medium">{{ user }}</span>
    <a href="/logout" class="text-red-500 ml-2">Logout</a>
  </div>
</nav>

<div class="max-w-6xl mx-auto p-6 grid md:grid-cols-2 gap-6">

<!-- AVAILABLE REQUESTS -->
<div class="bg-white p-6 rounded shadow">
  <h2 class="font-bold text-xl mb-4">Available Requests</h2>

  {% for r in pending %}
  <form method="POST" class="border p-3 mb-3 rounded">
    <b>{{ r.category }}</b> ({{ r.urgency }})
    <p>{{ r.description }}</p>

    <p class="text-sm">
      {{ r.seeker }} | {{ r.seeker_phone }} | {{ r.seeker_location }}
    </p>

    <input type="hidden" name="id" value="{{ r.id }}">
    <input name="phone" placeholder="Your Phone" class="w-full border mt-2 p-1 rounded">
    <input name="location" placeholder="Your Location" class="w-full border mt-2 p-1 rounded">
    <input name="eta" placeholder="ETA (min)" class="w-full border mt-2 p-1 rounded">

    <button class="mt-2 w-full bg-indigo-600 text-white py-1 rounded">
      Accept Request
    </button>
  </form>
  {% endfor %}
</div>

<!-- MY REQUESTS -->
<div class="bg-white p-6 rounded shadow">
  <h2 class="font-bold text-xl mb-4">My Requests</h2>

  {% for r in mine %}
  <div class="border p-3 mb-3 rounded bg-blue-50">
    <b>{{ r.category }}</b>
    <p>{{ r.description }}</p>

    {% if r.image %}
      <img src="/{{ r.image }}" class="w-40 mt-2 rounded">
    {% endif %}

    {% if r.status == "Accepted" %}
      <a href="/complete/{{ r.id }}" class="text-indigo-600 text-sm">
        Mark as Complete
      </a>
    {% elif r.status == "Completed" %}
      <span class="text-gray-600 text-sm">Waiting for rating</span>
    {% elif r.status == "Rated" %}
      <span class="text-green-600 text-sm">Rated ‚≠ê {{ r.rating }}</span>
    {% endif %}
  </div>
  {% endfor %}
</div>

</div>
</body>
</html>
